<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Quaternion Calculator" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://jchilds0.github.io//posts/quaternions/" /><meta property="og:url" content="https://jchilds0.github.io//posts/quaternions/" /><meta property="og:site_name" content="Josh" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-18T21:30:00+11:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Quaternion Calculator" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-28T19:11:51+10:00","datePublished":"2022-01-18T21:30:00+11:00","description":"Introduction","headline":"Quaternion Calculator","mainEntityOfPage":{"@type":"WebPage","@id":"https://jchilds0.github.io//posts/quaternions/"},"url":"https://jchilds0.github.io//posts/quaternions/"}</script><title>Quaternion Calculator | Josh</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Josh"><meta name="application-name" content="Josh"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/beach.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Josh</a></div><div class="site-subtitle font-italic">A countable set of random ideas</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/jchilds0" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['joshua.childs01','outlook.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Quaternion Calculator</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Quaternion Calculator</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Josh Childs </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Jan 18, 2022, 9:30 PM +1100" >Jan 18, 2022<i class="unloaded">2022-01-18T21:30:00+11:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Tue, Jun 28, 2022, 7:11 PM +1000" >Jun 28, 2022<i class="unloaded">2022-06-28T19:11:51+10:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1832 words">10 min read</span></div></div><div class="post-content"><p><strong>Introduction</strong></p><p>The aim of this project is to construct a quaternion calculator using flex and yacc. Flex is a lexical analyzer that uses regular expressions. We use flex to match the elements of our language, quaternions, and pass these tokens to yacc. Yacc, Yet Another Compiler Compiler, parses context free grammars. We use yacc to evaluate the expression matched by flex.</p><p><strong>Languages</strong></p><p>We start with a set of characters $\sum$, which we call the alphabet. Then the set of all string concatenations is denoted as $\sum^*$, the universal language. A language is a subset of $\sum^*$.</p><p><strong>Regular Languages</strong></p><p>A language, $L$, is regular if it can be matched by a regular expression. We define a regular expression inductively as follows,</p><p>If $r \in L$, then $r$ is a regular expression (the empty string $\varepsilon$ and the empty set $\emptyset$ are also regular expressions)</p><p>Let $R, Q$ be regular expressions, then</p><ul><li><p>$R \cup Q$, which means $R$ or $Q$</p><li><p>$(R)$</p><li><p>$R^*$, the Kleene star, which means $R$ concatenated with itself an arbitrary number of times</p><li><p>$RQ$, which means the concatenation of $R$ and $Q$</p></ul><p>are regular expressions. For example, any finite language is regular as listing out all elements of the language separated by the or operator $\cup$ is a regular expression for the language.</p><p>Another example, let’s use the alphabet ${ a, b}$ and the regular expression $(aa \cup bb)^*$. The empty string is matched by this regular expression as we can concatenate $(aa \cup bb)$ 0 times. The string bbbbaa is matched by the regular expression as we can concatenate $(aa \cup bb)$ 3 times, pick bb on the first two and aa in the last one.</p><p><strong>Context Free Languages</strong></p><p>A language, $L$, is context free if it can be generated by a context free grammar. A context free grammar consists of production rules over a the alphabet and another set called the non terminals. The elements of the alphabet are called the terminals and usually denoted as lowercase, while terminals are usually denoted as uppercase. A production rule consists of a nonterminal on the LHS which produces the string of terminals and non terminals on the RHS, for example</p>\[X \to aXY\]<p>To generate a string, we start with the nonterminal $S$ and finish when there are no more non terminals. For example, the language even-even over the alphabet ${a,b}$, which can be denoted by the set ${ a^n b^n \ | \ n \in \mathbb{N} }$, is generated by the context free grammar,</p>\[\begin{align} S &amp;\to ASB \tag{1} \\ S &amp;\to \varepsilon \tag {2} \\ A &amp;\to a \tag{3} \\ B &amp;\to b \tag{4} \end{align}\]<p>We can generate aabb as follows, starting with the non terminal S \(\begin{align*} S &amp;\to ASB \tag{Rule 1} \\ &amp;\to AASBB \tag{Rule 1} \\ &amp;\to AA\varepsilon BB \tag{Rule 2} \\ &amp;\to aabb \tag{Rule 3, 4} \end{align*}\)</p><p>It turns out this language cannot be generated by any regular expression.</p><p><strong>Quaternions</strong></p><p>A quaternion is a number of the form \(w + x \mathbf{i} + y \mathbf{j} + z \mathbf{k}\) where $w,x,y,z \in \mathbb{R}$ and $\mathbf{i},\mathbf{j},\mathbf{k}$ are the quaternion units, satisfying</p>\[\begin{align*} \mathbf{i}^2 &amp;= -1 \\ \mathbf{j}^2 &amp;= -1 \\ \mathbf{k}^2 &amp;= -1 \\ \mathbf{i}\mathbf{j}\mathbf{k} &amp;= -1 \end{align*}\]<p>The quaternions can be constructed rigorously using Clifford Algebras, but that is beyond the scope of this project. Along with the usual operations of addition, subtraction, multiplication and division, we also have the operation of rotation. Rotation(r, q)*p/Rotation(r,q) represents a rotation of the point p around the axis of rotation given by q by r radians.</p>\[\text{Rotation}(r, q) = \cos(r/2) + \sin(r/2) \hat{q}\]<p>where $\hat{q}$ is the unit vector in the direction of $q$. It is not obvious that Rotation($r,q$) has this effect on $p$, this lesson by Grant Sanderson gives an explanation and intuition behind this formula.</p><p><a href="https://eater.net/quaternions">Visualizing Quaternions</a></p><p>Now we make precise what a quaternion expression is with the following inductive definition,</p><ol><li>$\mathbf{i},\mathbf{j},\mathbf{k}$ are quaternion expression<li>If $r$ is a real number, then $r$, $r\mathbf{i}$, $r\mathbf{j}$, $r\mathbf{k}$ are quaternion expressions<li>If $p$ and $q$ are quaternion expressions, then so are: $(q)$, $-q$, $p + q$, $p-q$, $p*q$, $p/q$<li>If $q$ is a quaternion expression and $n$ is an natural number, then $q^n$ is a quaternion expression.<li>If $r$ is a NUMBER and $q$ is a quaternion expression, then Rotation($r,q$) is a quaternion expression.</ol><p><strong>Flex</strong></p><p>Now that we have regular expressions and context free grammars, we build the flex file to recognize the elements of the language quaternion. We will only consider numbers in their finite decimal representations or integers.</p><p>The following regular expression matches any non negative integer,</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="mi">0</span><span class="o">|</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="p">)</span>
</pre></table></code></div></div><p>and the corresponding language recognized by the expression as WHOLENUMBER. The following regular expression matches any non negative number in a finite decimal representation</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="p">([</span><span class="mi">1</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="err">\</span><span class="p">.[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*|</span><span class="mi">0</span><span class="err">\</span><span class="p">.[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="p">)</span>
</pre></table></code></div></div><p>and the corresponding language recognized by the expression as NUMBER. These two expressions along with a rule for operations and one for whitespace make up the flex file. For example the rule for NUMBER is as follows,</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="p">([</span><span class="mi">1</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="err">\</span><span class="p">.[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*|</span><span class="mi">0</span><span class="err">\</span><span class="p">.[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span><span class="p">)</span>   <span class="p">{</span>
<span class="cm">/*
            printf("Token: NUMBER;  Lexeme: %s\n", yytext);
*/</span>
            <span class="n">yylval</span><span class="p">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">atof</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span>
            <span class="k">return</span>  <span class="n">NUMBER</span><span class="p">;</span>
        <span class="p">}</span>
</pre></table></code></div></div><p><strong>Yacc</strong></p><p>Converting the inductive definition for the langage QUATERNION of quaternion expressions to a context free grammar over the alphabet \(\{ \mathbf{i}, \mathbf{j}, \mathbf{k}, +, −, ∗, /, ˆ, (, ), \text{NUMBER}, \text{WHOLENUMBER}, \text{ROTATION}, \mathbf{,} \}\),</p>\[\begin{align*} S &amp;\rightarrow Q \\ Q &amp;\rightarrow (Q) \ | -Q \ | \ Q + Q \ | \ Q - Q \ | \ Q * Q \ | \ Q \backslash Q \\ Q &amp;\rightarrow Q \text{^WHOLENUMER} \ | \ \text{ROTATION} (R, Q) \\ Q &amp;\rightarrow R \ | \ E \ | \ R E \\ R &amp;\rightarrow \text{WHOLENUMBER} \ | \ \text{NUMBER} \\ E &amp;\rightarrow \mathbf{i} \ | \ \mathbf{j} \ | \ \mathbf{k} \end{align*}\]<p>These are then used in the rules section of the yacc file to parse the file, taking the form, \(\it{pattern} \qquad \{ \ \ \ \it{action} \ \ \ \}\)</p><p>For example the rule $Q \to Q + Q$ becomes the rule,</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">expr</span>    <span class="o">:</span>   <span class="n">expr</span> <span class="sc">'+'</span> <span class="n">expr</span>   <span class="p">{</span>  <span class="err">$$</span> <span class="o">=</span> <span class="n">sum</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="err">$</span><span class="mi">3</span><span class="p">);</span>  <span class="p">}</span>
</pre></table></code></div></div><p>sum is a C function defined later in the yacc file as,</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="n">Quaternion</span>  <span class="n">sum</span><span class="p">(</span><span class="n">Quaternion</span> <span class="n">q1</span><span class="p">,</span> <span class="n">Quaternion</span> <span class="n">q2</span><span class="p">)</span>
<span class="cm">/*  returns the sum  q1 + q2  of the quaternions  q1  and  q2.
    This may be viewed as just a vector sum.
*/</span>
<span class="p">{</span>
  <span class="n">Quaternion</span>  <span class="n">qsum</span><span class="p">;</span>

  <span class="n">qsum</span><span class="p">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">q1</span><span class="p">.</span><span class="n">w</span> <span class="o">+</span> <span class="n">q2</span><span class="p">.</span><span class="n">w</span><span class="p">;</span>
  <span class="n">qsum</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">q1</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">q2</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
  <span class="n">qsum</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">q1</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">q2</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
  <span class="n">qsum</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">q1</span><span class="p">.</span><span class="n">z</span> <span class="o">+</span> <span class="n">q2</span><span class="p">.</span><span class="n">z</span><span class="p">;</span>

  <span class="k">return</span>  <span class="n">qsum</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Repeating this for the other production rules we obtain a rudimentary calculator.</p><p><strong>Extension</strong></p><p>The calculator works for simple operations, but there are a few issues. It can’t handle exponents that are quaternion expressions, the sqrt, log and exp functions are not defined, the return function prints zeros and +- instead of just -. There is also a computational error with juxtaposition, (3k)^2 is parsed as 3k^2.</p><p>We begin by making the return statements cleaner, we modify the simple print statement</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">return</span>  <span class="nf">printf</span><span class="p">(</span><span class="s">"%f + %f i + %f j + %f k</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
</pre></table></code></div></div><p>to include if statements that check if the number is non zero, include a + or - sign depending on the parity of the number, and include the + sign if there are non zero number that occur before it. The final function is long, but the outputs are cleaner.</p><p>To fix the issue with juxtaposition, we replace the naive $Q \to Q\text{^WHOLENUMBER}$ production rule with the following set of rules,</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">power</span>        <span class="o">:</span>    <span class="sc">'('</span> <span class="n">expr</span> <span class="sc">')'</span> <span class="sc">'^'</span> <span class="n">expr</span>          <span class="p">{</span>  <span class="err">$$</span> <span class="o">=</span> <span class="n">QuatPower</span><span class="p">(</span><span class="err">$</span><span class="mi">2</span><span class="p">,</span><span class="err">$</span><span class="mi">5</span><span class="p">);</span>  <span class="p">}</span>
	     <span class="o">|</span>    <span class="n">real</span> <span class="n">imag</span> <span class="sc">'^'</span> <span class="n">expr</span>             <span class="p">{</span>  <span class="err">$$</span> <span class="o">=</span> <span class="n">scalarTimesQuaternion</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="n">QuatPower</span><span class="p">(</span><span class="err">$</span><span class="mi">2</span><span class="p">,</span><span class="err">$</span><span class="mi">4</span><span class="p">));</span>  <span class="p">}</span>
	     <span class="o">|</span>    <span class="n">imag</span> <span class="sc">'^'</span> <span class="n">expr</span>                  <span class="p">{</span>  <span class="err">$$</span> <span class="o">=</span> <span class="n">QuatPower</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">,</span><span class="err">$</span><span class="mi">3</span><span class="p">);</span>  <span class="p">}</span>
	     <span class="o">|</span>    <span class="n">real</span> <span class="sc">'^'</span> <span class="n">expr</span>		     <span class="p">{</span>  <span class="err">$$</span> <span class="o">=</span> <span class="n">QuatPower</span><span class="p">(</span><span class="n">newQuaternion</span><span class="p">(</span><span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="err">$</span><span class="mi">3</span><span class="p">);</span>  <span class="p">}</span>
	     <span class="p">;</span>
</pre></table></code></div></div><p>Now for functions power, log, exp. To calculate the exponential, we use the Taylor Series for the exponential function. $q = w + x \mathbf{i} + y \mathbf{j} + z \mathbf{k} = w + \mathbf{v}$,</p>\[\begin{align} e^q = e^{w + \mathbf{v}} &amp;= e^w \sum_{n = 0}^{\infty} \frac{\mathbf{v}^n}{n!} \\ &amp;= e^w \bigg( \sum_{n = 0}^{\infty} \frac{\mathbf{v}^{2n}}{(2n)!} + \frac{\mathbf{v}^{2n+1}}{(2n+1)! }\bigg) \\ &amp;= e^w \bigg( \sum_{n = 0}^{\infty} \frac{||\mathbf{v}||^{2n} \hat{\mathbf{v}}^{2n}}{(2n)!} + \frac{||\mathbf{v}||^{2n + 1}\hat{\mathbf{v}}^{2n+1}}{(2n + 1)! }\bigg) \\ &amp;= e^w \bigg( \sum_{n = 0}^{\infty} \frac{(-1)^n ||\mathbf{v}||^{2n}}{(2n)!} + \frac{\mathbf{v}}{||\mathbf{v}||}\frac{(-1)^n||\mathbf{v}||^{2n + 1}}{(2n + 1)! }\bigg) \\ &amp;= e^w \bigg( \cos||\mathbf{v}|| + \frac{\mathbf{v}}{||\mathbf{v}||} \sin||\mathbf{v}|| \bigg) \end{align}\]<p>Then we use the C math functions to calculate each of these quantities.</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">Quaternion</span>  <span class="nf">QuatExp</span><span class="p">(</span><span class="n">Quaternion</span> <span class="n">p</span><span class="p">)</span>
<span class="cm">/*  returns e^p.  */</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">imaginaryPart</span><span class="p">(</span><span class="n">p</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
  	<span class="k">return</span> <span class="n">newQuaternion</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">w</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">scalarTimesQuaternion</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">w</span><span class="p">),</span>
          <span class="n">sum</span><span class="p">(</span><span class="n">newQuaternion</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">imaginaryPart</span><span class="p">(</span><span class="n">p</span><span class="p">))),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
              <span class="n">scalarTimesQuaternion</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">imaginaryPart</span><span class="p">(</span><span class="n">p</span><span class="p">))),</span>
                <span class="n">unitQuaternion</span><span class="p">(</span><span class="n">imaginaryPart</span><span class="p">(</span><span class="n">p</span><span class="p">)))));</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Deriving the formula for the quaternion logarithm, let $w = s + \mathbf{v}$, where $s \in \mathbb{R}$ and $\mathbf{v}$ is a purely imaginary quaternion.</p>\[\ln(w) = \ln||w|| + \ln \bigg(\frac{s + \mathbf{v}}{||w||} \bigg)\]<p>Let $\theta \in \mathbb{R}$ and $\mathbf{u}$ be a purely imaginary unit quaternion, using the exponential formula above,</p>\[e^{\theta \mathbf{u}} = \cos(\theta) + \mathbf{u} \sin(\theta)\]<p>Therefore by definition,</p>\[\ln(\cos(\theta) + \mathbf{u} \sin(\theta)) = \theta \mathbf{u}\]<p>Substituting $\theta = \arccos(\frac{s}{||w||})$,</p>\[\ln \bigg( \frac{s}{||w||} + \sqrt{1 - \frac{s^2}{||w||^2}} \mathbf{u} \bigg) = \mathbf{u} \arccos \bigg(\frac{s}{||w||} \bigg)\]<p>Using Pythagoras’ Theorem,</p>\[||w|| = ||s + \mathbf{v}|| \Rightarrow ||w||^2 - s^2 = ||v||^2\] \[\ln \bigg( \frac{s + ||\mathbf{v}|| \mathbf{u}}{||w||} \bigg) = \mathbf{u} \arccos \bigg(\frac{s}{||w||} \bigg)\]<p>Substituting $\mathbf{u} = \frac{\mathbf{v}}{||\mathbf{v}||}$, which is valid as $\mathbf{v}$ is a purely imaginary quaternion,</p>\[\ln \bigg( \frac{s + \mathbf{v}}{||w||} \bigg) = \frac{\mathbf{v}}{||\mathbf{v}||} \arccos \bigg(\frac{s}{||w||} \bigg)\]<p>Therefore,</p>\[\ln(w) = \ln||w|| + \frac{\mathbf{v}}{||\mathbf{v}||} \arccos \bigg(\frac{s}{||w||} \bigg)\]<p>The argument of the logarithm and inverse cosine are real so we can use C math functions to evaluate this formula,</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">Quaternion</span>  <span class="nf">QuatLog</span><span class="p">(</span><span class="n">Quaternion</span> <span class="n">p</span><span class="p">)</span>
<span class="cm">/*  returns log(p).  */</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">imaginaryPart</span><span class="p">(</span><span class="n">p</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
  	<span class="k">return</span> <span class="n">newQuaternion</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">w</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span>  <span class="n">sum</span><span class="p">(</span><span class="n">newQuaternion</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">p</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
              <span class="n">scalarTimesQuaternion</span><span class="p">(</span><span class="n">acos</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">w</span> <span class="o">/</span> <span class="n">norm</span><span class="p">(</span><span class="n">p</span><span class="p">)),</span>
              <span class="n">unitQuaternion</span><span class="p">(</span><span class="n">imaginaryPart</span><span class="p">(</span><span class="n">p</span><span class="p">))));</span>
<span class="p">}</span>

</pre></table></code></div></div><p>Finally we can use the logarithm and exponential functions to calculate powers of quaternions. By definition,</p>\[p^q = (e^{\ln(p)})^q = e^{q \ln(p)}\]<p>where $p \neq 0$.</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="n">Quaternion</span>  <span class="nf">QuatPower</span><span class="p">(</span><span class="n">Quaternion</span> <span class="n">p</span><span class="p">,</span> <span class="n">Quaternion</span> <span class="n">q</span><span class="p">)</span>
<span class="cm">/*  returns p^q.  */</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
      <span class="k">return</span> <span class="n">newQuaternion</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
      <span class="k">return</span> <span class="n">newQuaternion</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span>  <span class="n">QuatExp</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">QuatLog</span><span class="p">(</span><span class="n">p</span><span class="p">)));</span>
<span class="p">}</span>

</pre></table></code></div></div><p>To evaluate these expressions, we add rules to the lex file to recognize the functions,</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="n">Log</span><span class="o">|</span><span class="n">Ln</span><span class="o">|</span><span class="n">log</span><span class="o">|</span><span class="n">ln</span><span class="p">)</span> <span class="p">{</span>
<span class="cm">/*
            printf("Token: LOG;  Lexeme: %s\n", yytext);
*/</span>
            <span class="n">yylval</span><span class="p">.</span><span class="n">str</span> <span class="o">=</span> <span class="n">strdup</span><span class="p">(</span><span class="n">yytext</span><span class="p">);</span>
            <span class="k">return</span>  <span class="n">LOG</span><span class="p">;</span>
         <span class="p">}</span>
</pre></table></code></div></div><p>This means we only need to write one production rule in the yacc file, and the calculator will recognize any of the above forms,</p><div class="language-c highlighter-rouge"><div class="code-header"> <span text-data=" C "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">expr</span>     <span class="o">:</span>    <span class="n">LOG</span> <span class="sc">'('</span> <span class="n">expr</span> <span class="sc">')'</span> <span class="p">{</span>  <span class="err">$$</span> <span class="o">=</span> <span class="n">QuatLog</span><span class="p">(</span><span class="err">$</span><span class="mi">3</span><span class="p">);</span>  <span class="p">}</span>
</pre></table></code></div></div><p>If you would like to try out the calculator, an exe is available here <a href="https://github.com/jchilds0/jchilds0.github.io/releases/tag/Quat">Quat</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/language-theory/'>Language Theory</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/regular-languages/" class="post-tag no-text-decoration" >regular languages</a> <a href="/tags/context-free-languages/" class="post-tag no-text-decoration" >context free languages</a> <a href="/tags/quaternions/" class="post-tag no-text-decoration" >quaternions</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Quaternion Calculator - Josh&url=https://jchilds0.github.io//posts/quaternions/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Quaternion Calculator - Josh&u=https://jchilds0.github.io//posts/quaternions/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Quaternion Calculator - Josh&url=https://jchilds0.github.io//posts/quaternions/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/data-visualisation-1/">Data Visualisation 1 - Formula 1</a><li><a href="/posts/quaternions/">Quaternion Calculator</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/data-visualisation/">data visualisation</a> <a class="post-tag" href="/tags/adelie-penguins/">adelie penguins</a> <a class="post-tag" href="/tags/algebraic-semigroups/">algebraic semigroups</a> <a class="post-tag" href="/tags/chroma-viz/">chroma viz</a> <a class="post-tag" href="/tags/context-free-languages/">context free languages</a> <a class="post-tag" href="/tags/contour/">contour</a> <a class="post-tag" href="/tags/curves/">curves</a> <a class="post-tag" href="/tags/euler/">euler</a> <a class="post-tag" href="/tags/formula-1/">formula 1</a> <a class="post-tag" href="/tags/game-dev/">game dev</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/chroma-viz/"><div class="card-body"> <span class="timeago small" >Feb 8<i class="unloaded">2024-02-08T13:00:00+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Chroma Viz</h3><div class="text-muted small"><p> Introduction The aim of this project is to develop a collection of applications which can render custom graphics. Inspiration is taken from the VizRT suite of applications. Currently this collecti...</p></div></div></a></div><div class="card"> <a href="/posts/honours-thesis/"><div class="card-body"> <span class="timeago small" >Oct 20, 2023<i class="unloaded">2023-10-20T12:00:00+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Oscillating Curves on Triangulated 3-Manifolds</h3><div class="text-muted small"><p> Honours Thesis This browser does not support PDF!</p></div></div></a></div><div class="card"> <a href="/posts/flight-sim/"><div class="card-body"> <span class="timeago small" >Dec 10, 2022<i class="unloaded">2022-12-10T12:00:00+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Flight Simulator</h3><div class="text-muted small"><p> The aim of this project is to develop a flight simulator controlled using torsion and curvature. It is built in python using the panda3D graphics library. Download The game can be downloaded fr...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/EulerIdentity/" class="btn btn-outline-primary" prompt="Older"><p>Integral of Even Powers of Cosine</p></a> <a href="/posts/complex-analysis/" class="btn btn-outline-primary" prompt="Newer"><p>Holomorphic Dynamics and Mobius Transformations</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://www.instagram.com/_jcstudios/">Josh Childs</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/data-visualisation/">data visualisation</a> <a class="post-tag" href="/tags/adelie-penguins/">adelie penguins</a> <a class="post-tag" href="/tags/algebraic-semigroups/">algebraic semigroups</a> <a class="post-tag" href="/tags/chroma-viz/">chroma viz</a> <a class="post-tag" href="/tags/context-free-languages/">context free languages</a> <a class="post-tag" href="/tags/contour/">contour</a> <a class="post-tag" href="/tags/curves/">curves</a> <a class="post-tag" href="/tags/euler/">euler</a> <a class="post-tag" href="/tags/formula-1/">formula 1</a> <a class="post-tag" href="/tags/game-dev/">game dev</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
